<h1>Manage Users</h1>

<div class="new-review"><%= link_to 'New User', new_user_path, :class => 'btn btn-info' %></div>

<table id="users" class="datatable" data-source="<%= users_url(format: "json") %>">
  <thead>
  <th>Name</th>
  <th>Email</th>
  <th>AC</th>
  <th>Admin</th>
  <th></th>
  <th></th>
  <th></th>
  </thead>
  <tbody>

  </tbody>
</table>

<br class="spacer" />


<script>
  $('table#users').dataTable({
    sPaginationType: "two_button",
    bJQueryUI: true,
    bProcessing: true,
    bServerSide: true,
    sAjaxSource: $('#users').data('source'),
    oLanguage: {
        sInfoFiltered: ""
    },
    aoColumnDefs: [
      { bSortable: false, aTargets: [ 4, 5, 6 ] },
      { sClass: "admin", aTargets: [3] },
      { sClass: "ac", aTargets: [2] }
    ],
    fnCreatedRow: function(nRow, aData, iDataIndex){
      var email = aData[1];
      $(nRow).attr('id', email.substr(0, email.indexOf('@')));
    } 
  });
</script>
